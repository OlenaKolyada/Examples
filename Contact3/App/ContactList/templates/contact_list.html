<h1>Contact List</h1><br>

<table border="1">
    <thead>
        <tr>
            <th>#</th>
            <th>Civility</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Phone</th>
            <th>Email</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <?php $i = 1; ?>
        <?php foreach ($contacts as $contact): ?>
            <tr>
                <td><?php echo $i; ?></td>
                <td><?php echo $contact['civility']; ?></td>
                <td><?php echo $contact['first_name']; ?></td>
                <td><?php echo $contact['last_name'] ?></td>
                <td><?php echo $contact['phone'] ?></td>
                <td><?php echo $contact['email'] ?></td>
                <td>
                    <a href="?c=ContactController&m=renderContactForm&id=<?php echo urlencode($contact['id']); ?>">
                        Update
                    </a>
                    
                    <a href="?c=ContactController&m=handleContactDeleteRequest&id=<?php echo urlencode($contact['id']); ?>"
                    onclick="return confirm('Are you sure you want to delete this contact?')">
                    Delete
                </a>
                </td>
            </tr>
            <?php $i++; ?>
        <?php endforeach; ?>

    </tbody>
</table><br>
<form action="?c=ContactListController&m=exportContactsCsv" method="post">
    <input type="submit" value="Export to CSV">
</form>